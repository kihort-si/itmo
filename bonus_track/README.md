# bonus_track
## 1.2 Визуализация данных. Анализ и преобразование данных.
### [Индивидуальное задание 1.2.1](https://github.com/kihort-si/itmo/blob/main/bonus_track/1.2.1.py)
![Python](https://github.com/kihort-si/itmo/blob/main/common/python.svg)

Среди студентов проводился опрос о том, какие цифровые навыки будут полезны им в дальнейшей профессиональной деятельности. Была возможность выбора из нескольких предложенных вариантов, никто из студентов не выбрал больше, чем 9 пунктов.

В следующем файле содержатся данные опроса студентов. Структура файла такова: каждая строка отвечает выбору студента, а столбцы с наименованиями `Choice_1, Choice_2, ..., Choice_9` — отранжированному по важности выбранному списку навыков. Каждая ячейка содержит наименование выбранного навыка.

Ваша задача — на основе предложенных данных визуализировать результаты голосования.

Пункт 1. Постройте столбчатую диаграмму по столбцу `Choice_1` (столбец самого востребованного навыка).

- Какая из диаграмм в файле соответствует построенной? 
- Какое количество респондентов проголосовало за вариант Big Data?
- Какое количество респондентов проголосовало за вариант Машинное обучение?
- Какое количество респондентов проголосовало за вариант Статистика?

Пункт 2. Постройте круговую диаграмму по всем выбранным навыкам.

- Какая из круговых диаграмм в файле соответствует построенной? 
- Какое количество респондентов проголосовало за вариант Big Data?
- Какое количество респондентов проголосовало за вариант Машинное обучение?
- Какое количество респондентов проголосовало за вариант Статистика?

### [Индивидуальное задание 1.2.2](https://github.com/kihort-si/itmo/blob/main/bonus_track/1.2.2.py)
![Python](https://github.com/kihort-si/itmo/blob/main/common/python.svg)

Поступив на первый курс университета ИТМО, Антон решил не дожидаться, пока ему предоставят место в общежитии, а снять себе квартиру. Так как Университет ИТМО находится в центре города, рядом с местом учебы были только дорогие варианты, и Антон был готов проехать несколько остановок на метро. Конечно, лучше, если этих остановок будет **поменьше**. Но от метро до квартиры было принципиально добираться пешком. И, конечно, хотелось снять квартиру **поближе** к метро. Состояние квартиры его интересовало не слишком. Еще один важный момент — цена вопроса (**чем дешевле, тем лучше**). Все эти факторы показались студенту равнозначными и он решил учитывать их после нормировки в целевой функции как слагаемые с единичными коэффициентами, а лучшим значением целевой функции считать то, на котором функция достигает минимума. Следующие два фактора не были так принципиальны, но тем не менее Антон решил также принять их в расчет: расстояние до ближайшего фитнес-клуба и количество доступных интернет провайдеров в доме. Причем коэффициент, который решил использовать Антон для расстояния до ближайшего фитнес-клуба был установлен как **0.2**. Очевидно, что направленность этого параметра в целевой функции такая же, как и всех предыдущих. **Чем меньше расстояние до фитнес-клуба — тем лучше**. Несколько сложнее, оказалось, учесть интернет провайдеров. Здравый смысл подсказывал, что, чем больше количество провайдеров — тем лучше. То есть этот параметр имеет другую качественную направленность и его нормированное значение нельзя учитывать как простое слагаемое со знаком плюс в целевой функции. Антон решил, что будет использовать этот параметр в целевой функции со знаком минус (именно в этом случае большее количество провайдеров будет минимизировать значение целевой функции), т.е.: - норм.значение и с коэффициентом **0.4**. Причем варианты, в которых количество провайдеров равно 0, Антон вообще не рассматривал.

В файле содержатся возможные варианты квартир, которые рассматривал Антон.

В первом столбце ID квартиры, во втором — расстояние от метро пешком (в минутах).

В третьем столбце количество остановок на метро, которые надо проехать, чтобы добраться до места учебы.

Четвертый столбец — стоимость аренды квартиры в месяц.

Пятый — расстояние до ближайшего фитнес-клуба (пешком в минутах).

Шестой столбец — количество доступных интернет-провайдеров в доме.

Помогите выбрать три лучших варианта по совокупности параметров. Для этого надо применить **экспоненциальную нормировку**, сложить полученные нормированные значения параметров с учетом коэффициентов и выбрать лучшие варианты.

Укажите идентификаторы трех лучших вариантов через запятую и без пробелов, например: 3,10,7

## 1.3 Работа с временными рядами.
### [Индивидуальное задание 1.3.1](https://github.com/kihort-si/itmo/blob/main/bonus_track/1.3.1.py)
![Python](https://github.com/kihort-si/itmo/blob/main/common/python.svg)

Задан временной ряд $Y$ из $100$ элементов (см. файл). Ряд содержит шумы. Проведите экспоненциальное сглаживание временного ряда. При сглаживании используйте коэффициент сглаживания $\alpha = 0.2$.

- Укажите сглаженное значение для 38-ой (отсчет начинается с 1) точки ряда.
- Укажите сглаженное значение для 100-ой (последней) точки ряда.

Постройте линейный тренд для этого же исходного временного ряда $Y$.

Определите, насколько хорошо линейный тренд аппроксимирует значения временного ряда.

- Определите коэффициент $\alpha$ линейного тренда, задаваемого уравнением вида: $y = kx + b$.
- Определите коэффициент детерминации $R^2$ для тренда.
- Спрогнозируйте $101$-е значение ряда (используйте уравнение линейного тренда).

## 1.4.1 Системы управления базами данных. Проектирование данных. Ограничения целостности. Использование языка SQL (DDL) для создания структур данных.
### [Индивидуальное задание 1.4.2](https://github.com/kihort-si/itmo/blob/main/bonus_track/1.4.2.sql)
![PostgreSQL](https://github.com/kihort-si/itmo/blob/main/common/postgres.svg)

Есть таблица в базе, созданная следующим образом:

```sql
CREATE TABLE Diploma(
    Student_Id INTEGER,
    Name_of_Subject VARCHAR(25) NOT NULL,
    Total_Hours INTEGER CHECK(Total_Hours>30),
    Grade Integer CHECK(Grade IN(3, 4, 5)),
    Teacher_Name VARCHAR(50),
    PRIMARY KEY(Student_Id,Name_of_Subject)
);
```

**В таблицу последовательно добавляются следующие записи:**

```sql 
INSERT INTO Diploma VALUES(55, 'Algebra', 64, 4,'Petrov V.');
```

```sql 
INSERT INTO Diploma VALUES(14,'Ivanova O.', 32, 5,'Logic');
```

```sql 
INSERT INTO Diploma VALUES(55, 'Logic', 23, 5,'Ivanova O.');
```

```sql 
INSERT INTO Diploma VALUES(55, 'Law', 64, 5,'Ivanova O.');
```

```sql 
INSERT INTO Diploma VALUES(55, 'Algebra', 32, 5,'Petrov V.');
```

```sql 
INSERT INTO Diploma VALUES(55, 'Microeconomics', 23, 5,'Ivanova O.');
```

```sql 
INSERT INTO Diploma VALUES(55, 'Foreign Language', 23, 5,'Kugot S.');
```

```sql 
INSERT INTO Diploma (Student_Id, Name_of_Subject, Grade, Total_Hours) VALUES(33, 'Microeconomics', 5, 96);
```

```sql 
INSERT INTO Diploma (Student_Id, Teacher_Name, Grade, Total_Hours) VALUES(33, 'Lodkin', 96, 5);
```

```sql 
INSERT INTO Diploma (Student_Id, Teacher_Name, Grade, Total_Hours) VALUES(33, 'Lodkin', 4, 96);
```

Отметьте те команды, которые смогут добавить записи в таблицу, не изменяя значение заданных атрибутов.

## 1.4.2 Запросы на языке SQL (DML). Объекты базы данных
### [Индивидуальное задание 1.4.3](https://github.com/kihort-si/itmo/blob/main/bonus_track/1.4.3.sql)
![PostgreSQL](https://github.com/kihort-si/itmo/blob/main/common/postgres.svg)

Напишите запрос к базе Общественный транспорт и определите, сколько остановок в прямом направлении есть на 14 маршруте (вид транспорта — АВТОБУС)?

Напишите запрос к базе Общественный транспорт и определите, сколько остановок в обратном направлении есть на 11 маршруте (вид транспорта — ТРОЛЛЕЙБУС)?

### [Индивидуальное задание 1.4.4](https://github.com/kihort-si/itmo/blob/main/bonus_track/1.4.4.sql)
![PostgreSQL](https://github.com/kihort-si/itmo/blob/main/common/postgres.svg)

В демонстрационных базах ORACLE и PostgreSQL определена функция `GetNumber` с двумя числовыми параметрами. Спецификация функции `GetNumber (X, Y)`:

- X — целое число
- Y – целое число

Результат функции: целое число.
Вызовите эту функцию c параметрами `X = 10`, `Y = 7`

В базе данных Общественный Транспорт в таблице `TRACK` содержатся сведения о том, как транспортные средства проходили по своим маршрутам.

Обратите внимание, что в среде ORACLE APEX поля типа `DATE` отображаются в формате: `dd.mm.yyyy`. Тем не менее, этот тип данных кроме даты содержит и время. Для того, чтобы это время увидеть, достаточно задать явный формат, включающий время. Например:

```sql
SELECT to_char(stop_time_real, 'dd/mm/yyyy hh24:mi') FROM track
```

Кроме того, в запросе может понадобиться явное упоминание какой-то даты. Например, требуется вывести все записи из таблицы `track` с значением поля `stop_time_real` после `10 сентября 2019 15:00`:

```sql
SELECT * FROM track WHERE stop_time_real > to_date('10/09/2019 15:00', 'dd/mm/yyyy hh24:mi')
```

Определите, сколько автобусов пройдет остановку `28-29-Я ЛИНИИ В.О. (тест)<` с идентификатором `4522` в интервале `[14:00, 15:00)` `9 сентября 2019 года`.

Давайте представим, что Вы стоите рядом с некоторой достопримечательностью Санкт-Петербурга, например Марсово поле, с заданными координатами (`59.9418907`, `30.3305378`). Вычислите количество остановок, которые находятся от Вас на расстоянии не более `350` метров.

Координаты остановок находятся в таблице STOPS. Для вычисления сферического расстояния в базе данных Общественный Транспорт была создана функция CoordinateDistance. Спецификация функции `CoordinateDistance (Latitude1, Longitude1, Latitude2, Longitude2)`:

- Latitude1 — широта объекта 1 (числовой тип)
- Longitude1 – долгота объекта 1 (числовой тип)
- Latitude2 — широта объекта 2 (числовой тип)
- Longitude2 – долгота объекта 2 (числовой тип)

Результат функции: сферическое расстояние (в метрах).

## 1.5 NoSQL хранилища данных
### [Индивидуальное задание 1.5.2](https://github.com/kihort-si/itmo/blob/main/bonus_track/1.5.2.js)
![PostgreSQL](https://github.com/kihort-si/itmo/blob/main/common/postgres.svg)

Сколько в коллекции `student` документов, у которых значение поля name равно `Anna`?

Укажите минимальный возраст студентов (из коллекции `student`) с фамилией (поле `surname`) `Ivanov`.

Сколько станций на линии `Bakerloo` в метро Лондона (коллекция `UNDERGROUND`). Обратите внимание на то, что некоторые станции находятся на пересечении нескольких линий! В этом случае ключу `Line` будут сопоставлены несколько названий линий, перечисленных через разделители.

## [Промежуточная аттестация 1](https://github.com/kihort-si/itmo/blob/main/bonus_track/PA%201.1.py)

При выборе газонокосилки Юрий собрал следующие данные об аккумуляторных газонокосилках:

- Название газонокосилки — NAME
- Ширина скашиваемой полосы — WIDTH
- Стоимость — PRICE
- Мощность — POWER
- Объем травосборника — GRASS
- Площадь скашиваемой поверхности на одном заряде аккумулятора — AREA
- Описание газонокосилки — DESCRIPTION

Не все оказалось идеально с данными. Некоторые значения оказались пропущены, некоторые явно содержали экстремальные выбросы. Юрию пришлось обработать исходные данные следующим образом:

1. Параметр "Ширина скашиваемой полосы" содержал много пропущенных значений. Юрий придумал следующий алгоритм по их восстановлению:
   - Если в описании газонокосилки встречались слова "узкая|узкие|узкую|узкой", то значение восстанавливалось как медиана по существующим в исходном датасете значениям в диапазоне от 30 до 35.
   Введите медиану по существующим в исходном датасете значениям в диапазоне от 30 до 35.
   - Если встречались слова "средняя ширина"/"ширина средняя", то значение восстанавливалось как округленное до целого среднее арифметическое по существующим значениям в диапазоне от 36 до 40. Введите округленное до целого среднее арифметическое по сущ
   - сли встречались слова ("широкая" и "полоса")/("широкие" и "полосы"), то значение восстанавливалось как медиана по существующим значениям в диапазоне от 41 до 45.
Введите медиану по существующим в исходном датасете значениям в диапазоне от 41 до 45.

Введите среднее арифметическое для параметра "Ширина скашиваемой полосы" после восстановления пропущенных значений:

2. Цены на газонокосилки имели очень большой разброс и Юрий решил избавиться от вариантов, стоимость которых попадала под определение "экстремальных выбросов".
3. Затем Юрий исключил записи в которых все еще оставались пропущенные значения.

Введите количество оставшихся к рассмотрению газонокосилок. Введите среднее арифметическое для параметра "Стоимость" полученного после обработки набора данных.

4. Параметры газонокосилок имеют разную размерность, так что Юрий решил экспоненциально нормировать значения числовых параметров. Введите нормированные значения параметров газнокосилки Wolf NAF225:
   - Ширина скашиваемой полосы
   - Стоимость
   - Мощность
   - Объем травосборника
   - Площадь скашиваемой поверхности на одном заряде аккумулятора

5. И наконец, Юрий составил целевую функцию, на основе которой определил 3 наиболее подходящие (на его взгляд) газонокосилки. При определении целевой функции он использовал следующие слагаемые:
   - Нормированная ширина скашиваемой полосы с коэффициентом 3
   - Стоимость как слагаемое вида (1 - нормированная стоимость) с коэффициентом 2
   - Нормированную мощность с коэффициентом 5
   - Нормированный объём травосборника с коэффициентом 8
   - Нормированную площадь скашиваемой поверхности с коэффициентом 3

Какие 3 газонокосилки являются лучшими (по целевой функции Юрия)? Введите три названия газонокосилок через запятую, например `Cooper XWZ182, Nakita 74FHSC, Cooper INH176`

## [Промежуточная аттестация 2](https://github.com/kihort-si/itmo/blob/main/bonus_track/PA%201.2.sql)

Петр и Мария находятся на разных остановках троллейбуса (номер маршрута — `11`), причем на противоположных направлениях. Петр находится на остановке `5я Советская улица (5, 7, 11, 16)` с идентификатором `15553`, а Мария на остановке с идентификатором 27167. Время — середина дня и троллейбусы двигаются в обычном режиме с одинаковой скоростью в прямом и обратном направлениях. В этих условиях Петр и Мария пытаются хотя бы приблизительно понять, на каких остановках троллейбуса нужно выйти, чтобы встретиться как можно быстрее. Следующая серия запросов позволит в конечном счете дать ответ на этот вопрос.

1. Какие идентификаторы направления движения соответствует остановкам Петра и Марии?

Введите идентификатор направления движения остановки Петра.

Введите идентификатор направления движения остановки Марии.

2. Какие географические координаты соответствуют остановке, на которой находится Петр?

Введите широту (latitude).

Введите долготу (longitude).

3. Определите идентификатор ближайшей остановки противоположного направления на маршруте `11` троллейбуса для Петра.

4. Определите расстояние до ближайшей остановки противоположного направления на маршруте `11` троллейбуса для Петра.

Примечание: Для вычисления сферического расстояния в базе данных Общественный Транспорт была создана функция `CoordinateDistance`.
Спецификация функции `CoordinateDistance (Latitude1, Longitude1, Latitude2, Longitude2)`:

- Latitude1 — широта объекта 1 (числовой тип)
- Longitude1 – долгота объекта 1 (числовой тип)
- Latitude2 — широта объекта 2 (числовой тип)
- Longitude2 – долгота объекта 2 (числовой тип)

Результат функции: сферическое расстояние (в метрах).

5. Определите порядковый номер на `11` маршруте троллейбуса ближайшей остановки противоположного направления для Петра.

6. Определите порядковый номер (`STOP_NUMBER`) на `11` маршруте троллейбуса остановки Марии.

7. Определите точное расстояние (в метрах), которое связывает остановку Марии и ближайшую остановку Петра в противоположном направлении на `11` маршруте троллейбуса.

    Примечание: Напомним, что в таблице `ROUTE_BY_STOPS` поле `DISTANCE_BACK` указывает точное расстояние между соседними остановками.

8. На какой остановке следует выйти Марии,
чтобы расстояние, которое она проедет, оказалось как можно ближе к половине пути, определенному в пункте 7?

Введите идентификатор остановки.

9. Какая остановка на направлении движении Петра окажется ближе всего к той остановке, на которой выйдет Мария (в пункте 8).

Введите идентификатор остановки.