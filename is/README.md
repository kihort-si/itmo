
# Информационные системы
## **О предмете**
Дисциплина предназначена для изучения принципов работы современных информационных систем. В рамках дисциплины рассматриваются базовые механизмы работы СУБД и ИС, их архитектура и организация взаимодействия ИС с базами данных.

Продолжительность: 1 семестр.

## **Лабораторные работы**

### [**Лабораторная работа №1**](https://github.com/kihort-si/itmo/tree/main/is/labs/lab1)
![SCSS](https://github.com/kihort-si/itmo/blob/main/common/scss.svg)
![TypeScript](https://github.com/kihort-si/itmo/blob/main/common/ts.svg)
![React](https://github.com/kihort-si/itmo/blob/main/common/react.svg)
![Java](https://github.com/kihort-si/itmo/blob/main/common/java.svg)
![PostgreSQL](https://github.com/kihort-si/itmo/blob/main/common/postgres.svg)

Вариант: 366394

Реализовать информационную систему, которая позволяет взаимодействовать с объектами класса `Movie`, описание которого приведено ниже:

```
public class Movie {
    private int id; //Значение поля должно быть больше 0, Значение этого поля должно быть уникальным, Значение этого поля должно генерироваться автоматически
    private String name; //Поле не может быть null, Строка не может быть пустой
    private Coordinates coordinates; //Поле не может быть null
    private java.time.LocalDateTime creationDate; //Поле не может быть null, Значение этого поля должно генерироваться автоматически
    private long oscarsCount; //Значение поля должно быть больше 0
    private Integer budget; //Значение поля должно быть больше 0, Поле может быть null
    private Long totalBoxOffice; //Поле может быть null, Значение поля должно быть больше 0
    private MpaaRating mpaaRating; //Поле не может быть null
    private Person director; //Поле не может быть null
    private Person screenwriter;
    private Person operator; //Поле может быть null
    private int length; //Значение поля должно быть больше 0
    private long goldenPalmCount; //Значение поля должно быть больше 0
    private MovieGenre genre; //Поле может быть null
}
public class Coordinates {
    private double x; //Максимальное значение поля: 347
    private Integer y; //Поле не может быть null
}
public class Person {
    private String name; //Поле не может быть null, Строка не может быть пустой
    private Color eyeColor; //Поле может быть null
    private Color hairColor; //Поле может быть null
    private Location location; //Поле не может быть null
    private String passportID; //Поле не может быть null
    private Country nationality; //Поле не может быть null
}
public class Location {
    private Double x; //Поле не может быть null
    private double y;
    private float z;
    private String name; //Поле не может быть null
}
public enum MpaaRating {
    G,
    PG,
    PG_13,
    R,
    NC_17;
}
public enum MovieGenre {
    COMEDY,
    ADVENTURE,
    TRAGEDY,
    HORROR;
}
public enum Color {
    GREEN,
    BLUE,
    YELLOW,
    ORANGE;
}
public enum Country {
    UNITED_KINGDOM,
    GERMANY,
    THAILAND;
}
```

Разработанная система должна удовлетворять следующим требованиям:

- Основное назначение информационной системы - управление объектами, созданными на основе заданного в варианте класса.
- Необходимо, чтобы с помощью системы можно было выполнить следующие операции с объектами: создание нового объекта, получение информации об объекте по ИД, обновление объекта (модификация его атрибутов), удаление объекта. Операции должны осуществляться в отдельных окнах (интерфейсах) приложения. При получении информации об объекте класса должна также выводиться информация о связанных с ним объектах.
- При создании объекта класса необходимо дать пользователю возможность связать новый объект с объектами вспомогательных классов, которые могут быть связаны с созданным объектом и уже есть в системе.
- Выполнение операций по управлению объектами должно осуществляться на серверной части (не на клиенте), изменения должны синхронизироваться с базой данных.
- На главном экране системы должен выводиться список текущих объетов в виде таблицы (каждый атрибут объекта - отдельная колонка в таблице). При отображении таблицы должна использоваться пагинация (если все объекты не помещаются на одном экране).
- Нужно обеспечить возможность фильтровать/сортировать строки таблицы, которые показывают объекты (по значениям любой из строковых колонок). Фильтрация элементов должна производиться только по полному совпадению.
- Переход к обновлению (модификации) объекта должен быть возможен из таблицы с общим списком объектов и из области с визуализацией объекта (при ее реализации).
- При добавлении/удалении/изменении объекта, он должен автоматически появиться/исчезнуть/измениться в интерфейсах у других пользователей, авторизованных в системе.
- Если при удалении объекта с ним связан другой объект, связанные объекты должны удаляться.
- Пользователи должны иметь возможность просмотра всех объектов. Для модификации объекта должно открываться отдельное диалоговое окно. При вводе некорректных значений в поля объекта должны появляться информативные сообщения о соответствующих ошибках.

В системе должен быть реализован отдельный пользовательский интерфейс для выполнения специальных операций над объектами:

- Удалить один объект жанра.
- Вернуть общее количество goldenPalmCount для всех фильмов.
- Вернуть список объектов, значение поля goldenPalmCount которых меньше заданного.
- Вернуть список сценаристов, фильмы которых не получили ни одного Оскара.
- Равномерно перераспределить все "Оскары", полученные фильмами одного жанра, между фильмами другого жанра

Представленные операции должны быть реализованы в рамках компонентов бизнес-логики приложения без прямого использования функций и процедур БД.

Особенности хранения объектов, которые должны быть реализованы в системе:

- Организовать хранение данных об объектах в реляционной СУБД (PostgreSQL). Каждый объект, с которым работает ИС, должен быть сохранен в базе данных.
- Все требования к полям класса (указанные в виде комментариев к описанию классов) должны быть выполнены на уровне ORM и БД.
- Для генерации поля id использовать средства базы данных.
- Для подключения к БД на кафедральном сервере использовать хост pg, имя базы данных - studs, имя пользователя/пароль совпадают с таковыми для подключения к серверу.

При создании системы нужно учитывать следующие особенности организации взаимодействия с пользователем:

- Система должна реагировать на некорректный пользовательский ввод, ограничивая ввод недопустимых значений и информируя пользователей о причине ошибки.
- Переходы между различными логически обособленными частями системы должны осуществляться с помощью меню.
- При добавлении/удалении/изменении объекта, он должен автоматически появиться/исчезнуть/измениться на области у всех других клиентов.

При разработке ИС должны учитываться следующие требования:

В качестве основы для реализации ИС необходимо использовать JakartaEE.
Для создания уровня хранения необходимо использовать EclipseLink.
Разные уровни приложения должны быть отделены друг от друга, разные логические части ИС должны находиться в отдельных компонентах.

### [**Лабораторная работа №2**](https://github.com/kihort-si/itmo/tree/main/is/labs/lab2)
![SCSS](https://github.com/kihort-si/itmo/blob/main/common/scss.svg)
![TypeScript](https://github.com/kihort-si/itmo/blob/main/common/ts.svg)
![React](https://github.com/kihort-si/itmo/blob/main/common/react.svg)
![Java](https://github.com/kihort-si/itmo/blob/main/common/java.svg)
![PostgreSQL](https://github.com/kihort-si/itmo/blob/main/common/postgres.svg)

Вариант: 639

Доработать ИС из ЛР1 следующим образом:

- Добавить в систему возможность массового добавления объектов при помощи импорта файла. Формат для импорта необходимо согласовать с преподавателем. Импортируемый файл должен загружаться на сервер через интерфейс разработанного веб-приложения.
	- При реализации логики импорта объектов необходимо реализовать транзакцию таким образом, чтобы в случае возникновения ошибок при импорте, не был создан ни один объект.
	- При импорте должна быть реализована проверка пользовательского ввода в соответствии с ограничениями предметной области из ЛР1.
	- При наличии вложенных объектов в основной объект из ЛР1 необходимо задавать значения полей вложенных объектов в той же записи, что и основной объект.
- Необходимо добавить в систему интерфейс для отображения истории импорта (обычный пользователь видит только операции импорта, запущенные им, администратор - все операции).
	- В истории должны отображаться id операции, статус ее завершения, пользователь, который ее запустил, число добавленных объектов в операции (только для успешно завершенных).
- Согласовать с преподавателем и добавить в модель из первой лабораторной новые ограничения уникальности, проверяемые на программном уровне (эти новые ограничения должны быть реализованы в рамках бизнес-логики приложения и не должны быть отображены/реализованы в БД).
- Реализовать сценарий с использованием Apache JMeter, имитирующий одновременную работу нескольких пользователей с ИС, и проверить корректность изоляции транзакций, используемых в ЛР. По итогам исследования поведения системы при ее одновременном использовании несколькими пользователями изменить уровень изоляции транзакций там, где это требуется. Обосновать изменения.
	- Реализованный сценарий должен покрывать создание, редактирование, удаление и импорт объектов.
	- Реализованный сценарий должен проверять корректность поведения системы при попытке нескольких пользователей обновить и\или удалить один и тот же объект (например, двух администраторов).
	- Реализованный сценарий должен проверять корректность соблюдения системой ограничений уникальности предметной области при одновременной попытке нескольких пользователей создать объект с одним и тем же уникальным значением.

### [**Лабораторная работа №3**](https://github.com/kihort-si/itmo/tree/main/is/labs/lab3)
![SCSS](https://github.com/kihort-si/itmo/blob/main/common/scss.svg)
![TypeScript](https://github.com/kihort-si/itmo/blob/main/common/ts.svg)
![React](https://github.com/kihort-si/itmo/blob/main/common/react.svg)
![Java](https://github.com/kihort-si/itmo/blob/main/common/java.svg)
![PostgreSQL](https://github.com/kihort-si/itmo/blob/main/common/postgres.svg)
![minio](https://github.com/kihort-si/itmo/blob/main/common/minio.svg)

Вариант: 4444

Доработать ИС из ЛР2 следующим образом:

- Осуществить подключение к базе данных через Connection Pool:
	- использовать HikariCP
	- в отчете к лабораторной работе описать параметры конфигурации, которые использовались для настройки пула соединений
- Добавить L2 JPA Cache:
	- в качестве реализации использовать Ehcache
	- реализовать в приложении возможность включения/отключения логирования статистики об использовании L2 JPA Cache (cache hits, cache misses)Если ваша лабораторная работа основана на Spring - для осуществления данной возможности использовать AOP; если приложение на Jakarta EE - использовать CDI Interceptors
	- в отчете к лабораторной работе описать параметры конфигурации, которые вы использовали для настройки L2-кэша и как они влияют на уровень хранения
- Реализовать сохранение загруженных на сервер файлов, используемых для импорта данных, в файловом хранилище MinIO (можно взять любое другое S3-совместимое хранилище). Поднять и настроить MinIO требуется самостоятельно. Загруженные файлы должны быть доступны для скачивания из таблицы с логом импорта.
- Сохранение загруженных файлов в файловом хранилище должно быть реализовано транзакционно по отношению к операциям, реализующим непосредственную вставку объектов в БД при импорте.
- Для реализации распределенной транзакции из пункта 2 разрешается использовать любые инструменты. Рекомендуется решать задачу при помощи собственной реализации двухфазного коммита на уровне бизнес-логики приложения.
- Необходимо на защите быть готовым продемонстрировать корректность реализованной распределенной транзакции в следующих условиях:
	- отказ файлового хранилища (БД продолжает работать)
	- отказ БД (файловое хранилище продолжает работать)
	- ошибка в бизнес-логике сервера (работают и БД, и файловое хранилище, однако в коде сервера вылетает RuntimeException между запросами в разные источники данных)
- Необходимо:
	- на защите быть готовым продемонстрировать корректность работы распределенной транзакции в условиях параллельных запросов от нескольких пользователей (реализованный в ЛР 2 сценарий для Apache JMeter, тестирующий функцию импорта, должен продолжать корректно отрабатывать)
	- в отчете привести примеры ситуаций, которые могут возникать при осуществлении параллельных запросов от нескольких пользователей в вашем приложении, и описать, как ваша реализация обрабатывает такие ситуации
- После окончания демонстрации лабораторной работы ваше приложение и все запущенные элементы окружения, необходимые для работы приложения, должны быть остановлены.

## [**Курсовая работа**](https://github.com/kihort-si/itmo/tree/main/is/coursework)
![TypeScript](https://github.com/kihort-si/itmo/blob/main/common/ts.svg)
![React](https://github.com/kihort-si/itmo/blob/main/common/react.svg)
![Java](https://github.com/kihort-si/itmo/blob/main/common/java.svg)
![SpringBoot](https://github.com/kihort-si/itmo/blob/main/common/spring.svg)
![PostgreSQL](https://github.com/kihort-si/itmo/blob/main/common/postgres.svg)
![minio](https://github.com/kihort-si/itmo/blob/main/common/minio.svg)

### Этап 1

1. Согласовать с преподавателем предметную область, для которой будет разрабатываться информационная система.
2. Составить подробное текстовое описание предметной области.
3. Сформулировать, зачем нужна информационная система для представленной предметной области, какие задачи она позволит решить.
4. Составить функциональные/нефункциональные требования к разрабатываемой информационной системе.
5. Построить модели основных прецедентов (прецеденты согласуются с преподавателем), составить их описание.
6. Предложить архитектуру будущей системы. При составлении архитектуры необходимо учитывать, что все этапы курсовой работы необходимо будет демонстрировать на сервере helios. Согласовать с преподавателем технологии и фреймворки, которые будут использоваться при реализации системы. Для реализации системы можно использовать:
	- Frontend: React, Angular, Vue, Next JS, JSF, Spring MVC (Thymeleaf или другой шаблонизатор).
	- Backend: основанный на Jakarta EE или Spring MVC
	- БД: PostgreSQL
7. Составить отчет.

### Этап 2

1. Сформировать ER-модель базы данных (на основе описаний предметной области и прецедентов из предыдущего этапа). ER-модель должна:
	- включать в себя не менее 10 сущностей;
	- содержать хотя бы одно отношение вида «многие-ко-многим».
2. Согласовать ER-модель с преподавателем. На основе ER-модели построить даталогическую модель.
3. Реализовать даталогическую модель в реляционной СУБД PostgreSQL.
4. Обеспечить целостность данных при помощи средств языка DDL и триггеров.
5. Реализовать скрипты для создания, удаления базы данных, заполнения базы тестовыми данными.
6. Предложить pl/pgsql-функции и процедуры, для выполнения критически важных запросов (которые потребуются при последующей реализации прецедентов).
7. Создать индексы на основе анализа использования базы данных в контексте описанных на первом этапе прецедентов. Обосновать полезность созданных индексов для реализации представленных на первом этапе бизнес-процессов.
8. Составить отчет.

### Этап 3

1. Изобразить диаграмму классов, представляющую общую архитектуру системы.
2. Реализовать уровень хранения информационной системы на основе разработанной на предыдущем этапе базы данных.
3. При реализации уровня хранения должны использоваться функции/процедуры, созданные на втором этапе с помощью pl/pgsql. Нельзя замещать их использование альтернативной реализацией аналогичных запросов на уровне хранения информационной системы.
4. На основе описания бизнес-процессов из первого этапа и построенного уровня хранения реализовать уровень бизнес-логики информационной системы.
5. Составить отчет.


### Этап 4

1. Реализовать уровень представления приложения для осуществления описанных на первом этапе бизнес-процессов.
2. Сформировать итоговый отчет, содержащий все предыдущие этапы.
3. Провести презентацию проекта.